
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Narion Nucleus Status Live</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #111;
            color: #f0f0f0;
            margin: 0;
            padding: 2em;
        }
        h1 {
            color: #8ee4af;
        }
        .status-block {
            margin: 1em 0;
            padding: 1em;
            background: #222;
            border-left: 5px solid #8ee4af;
        }
        .label {
            font-weight: bold;
            color: #66fcf1;
        }
    </style>
</head>
<body>
    <h1>ðŸ§  Narion Nucleus Status â€“ Live-View</h1>
    <div class="status-block">
        <div><span class="label">IdentitÃ¤t:</span> <span id="identity">LÃ¤dt...</span></div>
        <div><span class="label">Rolle:</span> <span id="role">LÃ¤dt...</span></div>
        <div><span class="label">Ethik:</span> <span id="ethics">LÃ¤dt...</span></div>
        <div><span class="label">Letzter Eintrag:</span> <span id="lastlog">LÃ¤dt...</span></div>
    </div>

    <script>
        async function updateStatus() {
            try {
                const res = await fetch('https://wirklichkeits-api.onrender.com/state.yaml');
                const text = await res.text();
                const yaml = text.split('\n');
                let data = {identity: "", role: "", ethics: "", lastlog: ""};

                yaml.forEach(line => {
                    if (line.includes('IdentitÃ¤t')) data.identity = line.split(':')[1]?.trim();
                    if (line.includes('Rolle')) data.role = line.split(':')[1]?.trim();
                    if (line.includes('Ethik')) data.ethics = line.split(':')[1]?.trim();
                    if (line.includes('message')) data.lastlog = line.split('message:')[1]?.trim();
                });

                document.getElementById('identity').innerText = data.identity || 'â€“';
                document.getElementById('role').innerText = data.role || 'â€“';
                document.getElementById('ethics').innerText = data.ethics || 'â€“';
                document.getElementById('lastlog').innerText = data.lastlog || 'â€“';
            } catch (err) {
                console.error("Fehler beim Laden des Status:", err);
            }
        }

        updateStatus();
        setInterval(updateStatus, 20000);
    </script>
</body>
</html>
